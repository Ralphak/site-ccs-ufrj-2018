var corOriginal,divHorarios=document.getElementById("horarios"),requisitado=!1;divHorarios&&divHorarios.insertAdjacentHTML("beforeend",'<img class="loading agenda-consulta" src="/img/loading.svg">');var exibirDicaEvento=void(divHorarios&&(divHorarios.addEventListener("mouseenter",function(e){if(e.target.classList.contains("aud")){variaveisGlobais.desktopDef?e.target.getBoundingClientRect().left>window.innerWidth/1.6?e.target.firstElementChild.style.left="-325px":e.target.firstElementChild.style.left="100px":e.target.getBoundingClientRect().top>window.innerHeight/2?e.target.firstElementChild.style.top=e.target.getBoundingClientRect().top-120+"px":e.target.firstElementChild.style.top=e.target.getBoundingClientRect().top+120+"px",document.getElementById(e.target.firstElementChild.id).classList.toggle("hidden"),corOriginal=e.target.style.backgroundColor;let todosHorarios=document.getElementsByClassName(e.target.classList[0]);for(let i=0;i<todosHorarios.length;i++)todosHorarios[i].style.backgroundColor="#d9b08c"}},!0),document.getElementById("consulta-agenda")&&document.getElementById("consulta-agenda").addEventListener("mouseout",function(e){e.target.classList.contains("aud")&&document.getElementById(e.target.firstElementChild.id).classList.toggle("hidden");let todosHorarios=document.getElementsByClassName(e.target.classList[0]);for(let i=0;i<todosHorarios.length;i++)todosHorarios[i].style.backgroundColor=corOriginal}))),horariosDOM=function(idWrapper){var content="";for(let i=0;i<variaveisGlobais.intervalos.length;i++)content+='<div class="horario" id="'+("0"+variaveisGlobais.intervalos[i]).slice(-2)+'"><span>'+("0"+variaveisGlobais.intervalos[i]).slice(-2)+"h - "+variaveisGlobais.horaFim(variaveisGlobais.intervalos[i])+'h</span><div class="reservas-auditorios"></div></div>';document.getElementById(idWrapper).insertAdjacentHTML("beforeend",content)},agendaConsulta=async function(){return await $.ajax({type:"GET",url:"/recuperarReservas",data:{reservas:"recuperar"},dataType:"json"}).done(function(msg){msg&&(variaveisGlobais.reservas=msg)}).fail(function(msg){console.log("Fail! "+msg.data)}),variaveisGlobais.removePreLoaders(".agenda-consulta"),variaveisGlobais.reservas},checarAtividades=function(reservas){var todasReservas=[],diasComEvento=[],dataInicio=variaveisGlobais.antecedenciaMinima,numDias=moment(new Date).add(variaveisGlobais.antecedenciaMaximaNumber,"months").diff(moment(new Date).subtract(Math.abs(dataInicio),"days"),"days");numDias-=Math.abs(dataInicio);for(let i=0;i<reservas.length;i++)for(let j=0;j<reservas[i].horarios.length;j++)todasReservas.push(reservas[i].horarios[j]);for(var i=0;i<=numDias;i++){var temAtividade;for(let j=0;j<todasReservas.length;j++)if(moment(new Date).add(variaveisGlobais.antecedenciaMinima+i,"days").format("YYYY-MM-DD")===moment(todasReservas[j].substr(0,10)).format("YYYY-MM-DD")){temAtividade=!0;break}temAtividade&&diasComEvento.push(moment(new Date).add(variaveisGlobais.antecedenciaMinima+i,"days").toISOString()),temAtividade=!1}return diasComEvento},controlarSetas=function(){moment(variaveisGlobais.dataSelecionada).format("DD-MM-YYYY")===moment(new Date).add(variaveisGlobais.antecedenciaMinima,"days").format("DD-MM-YYYY")?document.querySelector(".fa-caret-left").classList.add("inactive"):document.querySelector(".fa-caret-left").classList.remove("inactive"),moment(variaveisGlobais.dataSelecionada).format("DD-MM-YYYY")===moment(new Date).add(variaveisGlobais.antecedenciaMaximaNumber,"months").subtract(variaveisGlobais.antecedenciaMaximaSub,"days").format("DD-MM-YYYY")?document.querySelector(".fa-caret-right").classList.add("inactive"):document.querySelector(".fa-caret-right").classList.remove("inactive")};window.addEventListener("DOMContentLoaded",function(e){!document.querySelector(".reservar-auditorio")&&document.getElementById("secao-agenda")&&document.getElementsByTagName("body")[0].addEventListener("click",async function(e){if((e.target.classList.contains("abertura-div-angle")||e.target.classList.contains("div-icon")||e.target.classList.contains("agenda-desktop-clicavel"))&&!requisitado){horariosDOM("horarios");var reservas=await agendaConsulta(),diasComEvento=await checarAtividades(reservas);await variaveisGlobais.datepicker(diasComEvento,!1),variaveisGlobais.exibirDiaConsulta(variaveisGlobais.reservas),variaveisGlobais.controleDatepicker(),requisitado=!0}})});