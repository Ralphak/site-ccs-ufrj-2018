function slideButton(e){var images=document.querySelectorAll(".slide"),activeIndex=0;for(let i=0;i<images.length;i++)images[i].classList.contains("selected")&&(activeIndex=i);for(let i=0;i<images.length;i++)images[i].classList.remove("img-right"),images[i].classList.remove("img-left");e.target.classList.contains("fa-angle-right")?(reiniciarIntervalo(),images[activeIndex].classList.remove("selected"),images[activeIndex].classList.add("img-left"),activeIndex===images.length-2&&images[0].classList.add("img-right"),activeIndex===images.length-1?images[0].classList.add("selected"):images[activeIndex+1].classList.add("selected"),activeIndex===images.length-1?images[1].classList.add("img-right"):images[activeIndex+2]&&images[activeIndex+2].classList.add("img-right"),activeIndex===images.length-1?activeIndex=0:activeIndex++):e.target.classList.contains("fa-angle-left")&&(reiniciarIntervalo(),images[activeIndex].classList.remove("selected"),images[activeIndex].classList.add("img-right"),1===activeIndex&&images[images.length-1].classList.add("img-left"),0===activeIndex?images[images.length-1].classList.add("selected"):images[activeIndex-1].classList.add("selected"),0===activeIndex?(images[0].classList.add("img-right"),images[images.length-2].classList.add("img-left")):images[activeIndex-2]&&images[activeIndex-2].classList.add("img-left"),0===activeIndex?activeIndex=images.length-1:activeIndex--)}function slideshow(){var images=document.querySelectorAll(".slide"),activeIndex=0;for(let i=0;i<images.length;i++)images[i].classList.contains("selected")&&(activeIndex=i);for(let i=0;i<images.length;i++)images[i].classList.remove("img-right"),images[i].classList.remove("img-left");activeIndex===images.length-1?images[1].classList.add("img-right"):images[activeIndex+2]&&images[activeIndex+2].classList.add("img-right"),images[activeIndex].classList.remove("selected"),images[activeIndex].classList.add("img-left"),activeIndex===images.length-2&&images[0].classList.add("img-right"),activeIndex===images.length-1?images[0].classList.add("selected"):images[activeIndex+1].classList.add("selected"),activeIndex===images.length-1?activeIndex=0:activeIndex++}function reiniciarIntervalo(){clearInterval(intervaloSlides),intervaloSlides=setInterval(slideshow,5500)}var conteudos,intervaloSlides;document.querySelector(".slideshow").addEventListener("click",function(e){slideButton(e)}),intervaloSlides=setInterval(slideshow,5500),document.getElementById("acesso-rapido-controle").addEventListener("click",function(e){var offsetUp,offsetDown;e.target.classList.toggle("fa-caret-down"),e.target.classList.toggle("fa-caret-up"),document.querySelector(".acesso-rapido").classList.toggle("aberto"),$(window).width()<500?(offsetUp=70,offsetDown=10):$(window).width()>=500&&$(window).width()<1024&&(offsetUp=90,offsetDown=20),e.target.classList.contains("fa-caret-down")&&$(window).width()<1024?$("html, body").animate({scrollTop:$(".acesso-rapido").offset().top-offsetDown},"slow",function(){}):$(window).width()<1024&&$("html, body").animate({scrollTop:$(".acesso-rapido").offset().top-offsetUp},"slow",function(){})}),document.getElementById("secoes").addEventListener("click",function(e){if(!variaveisGlobais.desktopDef){if(e.target.classList.contains("div-angle")||e.target.classList.contains("div-icon"))for(let i=0;i<document.querySelectorAll(".index-secao").length;i++)e.target.parentElement!==document.querySelectorAll(".index-secao")[i]&&(document.querySelectorAll(".index-secao")[i].classList.remove("aberto"),document.querySelectorAll(".index-secao")[i].firstElementChild.firstElementChild.classList.remove("fa-angle-up"),document.querySelectorAll(".index-secao")[i].firstElementChild.firstElementChild.classList.add("fa-angle-down"));e.target.classList.contains("div-icon")&&(e.target.parentElement.classList.toggle("aberto"),e.target.previousElementSibling.firstElementChild.classList.toggle("fa-angle-down"),e.target.previousElementSibling.firstElementChild.classList.toggle("fa-angle-up"),setTimeout(function(){$("html, body").animate({scrollTop:$("#"+e.target.parentElement.id).offset().top-70},"slow",function(){})},310)),e.target.classList.contains("fa-angle")&&(e.target.parentElement.parentElement.classList.toggle("aberto"),e.target.classList.toggle("fa-angle-down"),e.target.classList.toggle("fa-angle-up"),setTimeout(function(){e.target.classList.contains("fa-angle-up")?$("html, body").animate({scrollTop:$("#"+e.target.parentElement.parentElement.id).offset().top-70},"slow",function(){}):e.target.classList.contains("fa-angle-down")&&e.target.parentElement.parentElement.nextElementSibling?$("html, body").animate({scrollTop:$("#"+e.target.parentElement.parentElement.nextElementSibling.id).offset().top-70},"slow",function(){}):e.target.classList.contains("fa-angle-down")&&!e.target.parentElement.parentElement.nextElementSibling&&$("html, body").animate({scrollTop:$("#"+document.querySelectorAll(".index-secao")[0].id).offset().top-70},"slow",function(){})},310))}}),document.querySelector(".top-bar").classList.add("topbar-pagina-principal"),document.querySelector("body").classList.add("body-pagina-principal");var recuperarConteudos=async function(){return await $.ajax({type:"GET",url:"/recuperarIndex",dataType:"json"}).done(function(msg){msg&&(conteudos=msg)}).fail(function(msg){console.log("Fail! "+msg.data)}),variaveisGlobais.removePreLoaders(".conteudo-index"),conteudos},slidesDOM=function(slides){var slidesContainer=document.querySelector(".slides-container");for(let i=0;i<slides.length;i++){let slideImg,content="";slideImg=variaveisGlobais.mobileDef?`${slides[i].arquivo}Sm`:slides[i].arquivo,slides[i].selecionado?content+=`<div class="slide selected" style="background: #fff url('./img/slides/${slideImg}.jpg') no-repeat left; background-size: cover">`:slides[i].right?content+=`<div class="slide img-right" style="background: #fff url('./img/slides/${slideImg}.jpg') no-repeat left; background-size: cover">`:content+=`<div class="slide" style="background: #fff url('./img/slides/${slideImg}.jpg') no-repeat left; background-size: cover">`,content+=`<div class="slide-header">\n                        <h3>${slides[i].titulo}</h3>\n                        <p>${slides[i].resumo}</p>\n                    </div>\n                    <i class="fa fa-angle-left"></i>\n                    <i class="fa fa-angle-right"></i>\n                </div>`,slidesContainer.insertAdjacentHTML("beforeend",content)}},destaquesDOM=function(destaques){for(let i=0;i<destaques.length;i++){var img;img=0===i?"Md":"Sq";var content=`<article class="destaque"><a href="/conteudos/${destaques[i]._id}">`;destaques[i].imagem&&(content+=`<picture class="img-news-container" alt="${destaques[i].titulo}">\n                            <source media="(min-width: 1024px)" srcset="/img/conteudos/${destaques[i]._id}${img}.jpg">\n                            <source media="(min-width: 300px)" srcset="/img/conteudos/${destaques[i]._id}Sm.jpg">\n                            <img src="img/conteudos/${destaques[i]._id}Md.jpg">\n                        </picture>`),content+=`<div class="content borda-${destaques[i].natureza}">\n                        <div>\n                            <h3>${destaques[i].titulo}</h3>\n                            <span class='span-conteudo borda-${destaques[i].natureza}'>${destaques[i].natureza}</span>\n                        </div>\n                        <p>${destaques[i].texto.substring(0,160).replace(/(<([^>]+)>)/gi," ")}...</p>\n                        <div class="leia-mais-div"><span class="leia-mais">Leia mais</span> </div>\n                    </div>\n                </a></article>`,document.querySelector(".secao-destaques").insertAdjacentHTML("beforeend",content)}document.querySelector(".secao-destaques").insertAdjacentHTML("beforeend",'<div class="arquivo"></div><div class="arquivo"></div><div class="arquivo"></div>')},recentesDOM=function(recentes){for(let i=0;i<recentes.length;i++){var content="";content+='<article class="noticia">',recentes[i].imagem&&(content+=` <div class="img-news-container" alt="${recentes[i].titulo}"> <img src="img/conteudos/${recentes[i]._id}Sm.jpg"></div>`),content+=`<div class="content borda-${recentes[i].natureza}">\n                       <span class="data">${recentes[i].dataAmigavel}</span>\n                        <a href="/conteudos/${recentes[i]._id}"><h3>${recentes[i].titulo}</h3></a>\n\n                        <span class='span-conteudo borda-${recentes[i].natureza}'>${recentes[i].natureza}</span>\n\n                        <p>${recentes[i].texto.substring(0,160).replace(/(<([^>]+)>)/gi," ")}...</p>\n                        <div class="leia-mais-div"><a href="/conteudos/${recentes[i]._id}"><span class="leia-mais">Leia mais</span></a> </div>\n                    </div>\n                </article>`,document.querySelector(".secao-conteudos-recentes").insertAdjacentHTML("beforeend",content)}},midiasDOM=function(midias,tipo){let arquivo,subtipo,tamanhoThumb;tamanhoThumb=window.innerWidth<=500?"m":"l";for(let i=0;i<midias.length;i++)midias[i].natureza===tipo&&("video"===tipo?(subtipo=`<span class='subtipo'>${midias[i].subtipo}</span>`,arquivo=`<div class="youtube-player video-${midias[i].midia} borda-${midias[i].natureza}" data-id='${midias[i].midia}'></div>`):(arquivo=`<a href='https://www.instagram.com/p/${midias[i].midia}/?taken-by=ccs_ufrj' target='_blank'><div class='foto-container borda-${midias[i].natureza}'><img src="https://www.instagram.com/p/${midias[i].midia}/media/?size=${tamanhoThumb}" alt='${midias[i].titulo}'></div></a>`,subtipo=""),document.querySelector(`.cards-${tipo}s`).insertAdjacentHTML("beforeend",`<div class="arquivo">\n                    ${arquivo}\n                    ${subtipo}\n                    <h3>${midias[i].titulo}</h3>\n                    <div class='descricao descricao-${midias[i].midia} hidden opacidade-zero'>\n                        \n                        <p class = midia-titulo>${midias[i].titulo}</p>\n                        <div class='midia-texto'>${midias[i].texto}</div>\n                    </div>\n                </div>`));document.querySelector(`.cards-${tipo}s`).insertAdjacentHTML("beforeend",'<div class="arquivo placeholder"></div><div class="arquivo placeholder"></div><div class="arquivo placeholder"></div>')};document.addEventListener("DOMContentLoaded",async function(){document.querySelector(".agenda-wrapper").outerHTML="",await recuperarConteudos();var noticiasRecentes=conteudos[0],midias=conteudos[1],slides=conteudos[2],destaques=conteudos[3];slidesDOM(slides),destaquesDOM(destaques),recentesDOM(noticiasRecentes),midiasDOM(midias,"video"),midiasDOM(midias,"foto");var tag=document.createElement("script");tag.src="https://www.youtube.com/iframe_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);var player;document.querySelector(".videos-body .card-container").addEventListener("click",e=>{if("IMG"===e.target.tagName&&!document.getElementById("overlay").classList.contains("video-ativo")){let id=$(e.target.parentElement).attr("data-id");document.querySelector(`.video-${id}`).parentElement;variaveisGlobais.controlarVisibilidade("exibir","#overlay",600),document.getElementById("overlay").classList.add("video-ativo"),document.getElementById("overlay").innerHTML="",document.getElementById("overlay").insertAdjacentHTML("beforeend",`<div id='ytPlayer-${id}' class='youtube-player full-size'></div><i class="fa fa-times fechar-midia"></i>`),variaveisGlobais.controlarVisibilidade("exibir",`.descricao-${id}`),document.querySelector(".body-pagina-principal").classList.add("fixo"),(id=>{function onPlayerReady(event){event.target.playVideo()}function onPlayerStateChange(event){}!function(id){player=new YT.Player(`ytPlayer-${id}`,{videoId:id,events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange}})}(id)})(id),fecharPlayer(id)}});var div,n,fecharPlayer=id=>{document.querySelector(".fechar-midia").addEventListener("click",()=>{player.stopVideo(),variaveisGlobais.controlarVisibilidade("ocultar","#overlay",600),setTimeout(()=>{document.getElementById("overlay").classList.remove("video-ativo")},600),document.getElementById(`ytPlayer-${id}`).classList.remove("full-size"),variaveisGlobais.controlarVisibilidade("ocultar",`.descricao-${id}`,600),document.querySelector(".body-pagina-principal").classList.remove("fixo")})},v=document.getElementsByClassName("youtube-player");for(n=0;n<v.length;n++)(div=document.createElement("div")).setAttribute("data-id",v[n].dataset.id),div.innerHTML=variaveisGlobais.labnolThumb(v[n].dataset.id),v[n].appendChild(div)});