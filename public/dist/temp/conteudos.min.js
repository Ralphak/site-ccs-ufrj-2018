function ordenar(b,a){return a.nome<b.nome?-1:a.nome>b.nome?1:0}function ordenarDocs(b,a){return a.nomeAmigavel>b.nomeAmigavel?a.dataSessao?1:-1:a.nomeAmigavel<b.nomeAmigavel?a.dataSessao?-1:1:0}var selectedOld,selected,conteudo,conteudos,equipe,link=document.location.href.split("/").pop();if(document.querySelector("inserir-conteudos"))dadosBusca={};else if(document.getElementById("query"))var termos;else var dadosBusca={_id:link};var recuperarEquipe=async function(){await $.ajax({type:"GET",url:"/recuperarEquipe",data:{grupos:link},dataType:"json"}).done(function(msg){msg&&(msg.sort(ordenar),equipe=msg)}).fail(function(msg){console.log("Fail! "+msg.data)}),variaveisGlobais.removePreLoaders(".equipe")},recuperarDocs=async function(obj){var docs;return await $.ajax({type:"GET",url:"/conteudos/recuperarDocs",data:obj,dataType:"json"}).done(function(msg){msg&&(docs=msg)}).fail(function(msg){console.log("Fail! "+msg.data)}),docs};let separarDocumentos=docs=>{let atas=[],diversos=[],docsObj={};for(let i=0;i<docs.length;i++)"ata"===docs[i].tipo?atas.push(docs[i]):"diversos"===docs[i].tipo&&diversos.push(docs[i]);return atas.length>0&&(docsObj.atas=atas.sort(ordenarDocs)),diversos.length>0&&(docsObj.diversos=diversos),docsObj},textoCamelCase=texto=>{texto.trim();let textoSemEspacos=texto.split(" ")[0].toLowerCase();for(let i=1;i<texto.split(" ").length;i++)textoSemEspacos+=texto.split(" ")[i].slice(0,1).toUpperCase()+texto.split(" ")[i].slice(1,texto.split(" ")[i].length).toLowerCase();return textoSemEspacos.normalize("NFD").replace(/[\u0300-\u036f]/g,"")};var pastaParaSalvar=docs=>"noticia"===conteudos.natureza||"informe"===conteudos.natureza||"evento"===conteudos.natureza?"diversos":docs[0].pagina;let inserirAtas=(atas,anos)=>{var pasta=pastaParaSalvar(atas);for(let i=anos.length-1;i>=0;i--)document.querySelector(".div-atas").insertAdjacentHTML("beforeend",`\n        <div class = "div-atas-ano atas-${anos[i]} arquivos-menu">\n            <div class="icon atas-icon">\n                <i class="fa fa-caret-down"></i>\n            </div>\n            <h4 class='div-ano'>${anos[i]}</h4>\n            <div class='docs'></div>\n        </div>\n        `);for(let i=0;i<atas.length;i++)document.querySelector(`.atas-${atas[i].ano} .docs`).insertAdjacentHTML("beforeend",`<a href='/docs/${pasta}/emUso/${atas[i]._id}' target='_blank'>${atas[i].nomeAmigavel}</a>`)},rotinasExibicaoAtas=atas=>{let anos=[];document.querySelector(".div-arquivos").insertAdjacentHTML("beforeend","<div class = 'div-atas arquivos-menu'>\n        <div class=\"icon atas-icon\">\n            <i class=\"fa fa-caret-down\"></i>\n        </div>\n        <h3 class='div-docs'>Atas</h3>\n    </div>");for(let i=0;i<atas.length;i++)anos.push(atas[i].ano);var anosSemRepeticao=Array.from(new Set(anos));anosSemRepeticao.sort(),inserirAtas(atas,anosSemRepeticao)},inserirDiversos=docs=>{let pasta=pastaParaSalvar(docs);docs.sort(ordenarDocs);for(let i=0;i<docs.length;i++)document.querySelector(".div-diversos").insertAdjacentHTML("beforeend",`<a href='/docs/${pasta}/emUso/${docs[i]._id}' target='_blank'>${docs[i].nomeAmigavel}</a>`)},rotinasExibicaoDiversos=diversos=>{document.querySelector(".div-arquivos").insertAdjacentHTML("beforeend","\n    <div class='div-diversos arquivos-menu'>\n        <div class=\"icon diversos-icon\">\n            <i class=\"fa fa-caret-down\"></i>\n        </div>\n        <h3 class='div-docs'>Diversos</h3>\n    </div>"),inserirDiversos(diversos)},menuDocumentos=e=>{e.target.classList.toggle("aberto"),setTimeout(()=>{variaveisGlobais.trocarSeta(e.target.firstElementChild.firstElementChild)},250)},rotinasDocumentos=async()=>{var obj={pagina:link};let docs=await recuperarDocs(obj),docsObj=separarDocumentos(docs),arquivos="";(docsObj.atas||docsObj.diversos)&&(arquivos="\n        <h2>Documentos:</h2>\n        <div class = 'div-arquivos'></div>"),document.querySelector(".texto-container").insertAdjacentHTML("afterend",arquivos),docsObj.atas&&rotinasExibicaoAtas(docsObj.atas),docsObj.diversos&&rotinasExibicaoDiversos(docsObj.diversos),document.querySelector(".div-arquivos")&&document.querySelector(".div-arquivos").addEventListener("click",e=>{e.target.classList.contains("arquivos-menu")&&menuDocumentos(e)})};var montarEquipe=function(contatos){function inserirContato(contadorSetor,contadorContato){let cargo="";for(let i=0;i<contatosDoSetor[contadorContato].cargos.length;i++)if(link===contatosDoSetor[contadorContato].cargos[i].contexto){cargo=contatosDoSetor[contadorContato].cargos[i].cargo;break}document.getElementById(setoresID[contadorSetor]).lastElementChild.firstElementChild.insertAdjacentHTML("beforeend",`<div class="contato" id="${contatosDoSetor[contadorContato].email}"></div>`),contatosDoSetor[contadorContato].foto?document.getElementById(contatosDoSetor[contadorContato].email).insertAdjacentHTML("beforeend",`<img src="/img/usuarios/${contatosDoSetor[contadorContato].email}.jpg">`):document.getElementById(contatosDoSetor[contadorContato].email).insertAdjacentHTML("beforeend",avatar),contatosDoSetor[contadorContato].nome&&document.getElementById(contatosDoSetor[contadorContato].email).insertAdjacentHTML("beforeend",`<p class="nome">${contatosDoSetor[contadorContato].nome}</p>`),document.getElementById(contatosDoSetor[contadorContato].email).insertAdjacentHTML("beforeend",`<p class="cargo">${cargo}</p>`),document.getElementById(contatosDoSetor[contadorContato].email).insertAdjacentHTML("beforeend",`<p><a href="mailto:${contatosDoSetor[contadorContato].email}">${contatosDoSetor[contadorContato].email}</a></p>`),contatosDoSetor[contadorContato].telefone&&document.getElementById(contatosDoSetor[contadorContato].email).insertAdjacentHTML("beforeend",`<p>${contatosDoSetor[contadorContato].telefone}</p>`)}var setores=["Decania","Superintendência Acadêmica","Superintendência Gerencial","Gabinete da Decania","Coordenações do CCS","Assessorias do CCS","Seção de Ensino","Biblioteca","Escritório de Planejamento","Seção Financeira","Seção de Atividades Gerenciais","Seção de Compras","Seção de Pessoal","Seção de Audiovisual","Seção de Protocolo","Seção de Rede e Informática","Seção de Manutenção","Seção de Vigilância Federal","Administração da Sede","Administração da Sede - Bloco N","Segurança e Saúde do Trabalho (SST)","Almoxarifado"],setoresID=["ccs-dec","ccs-supAc","ccs-supGer","ccs-gabinete","ccs-coord","ccs-assessoria","ccs-ensino","ccs-bib","ccs-eplan","ccs-financeira","ccs-atGer","ccs-compras","ccs-pessoal","ccs-audiovisual","ccs-protocolo","ccs-rede","ccs-manutencao","ccs-vigilancia","ccs-admSede","ccs-admN","ccs-sst","ccs-almoxarifado"];for(let i=0;i<setores.length;i++){document.getElementById("div-equipe").insertAdjacentHTML("beforeend",`<div class="setores" id="${setoresID[i]}"><div class="setores-header"><h2>${setores[i]}</h2><i class="fa fa-caret-up"></i></div><div class="card-container"><div class="card-div"></div></div></div>`);var contatosDoSetor=[];for(let j=equipe.length-1;j>=0;j--)(equipe[j].grupos.includes(setoresID[i])||equipe[j].grupos.includes(`${setoresID[i]}-chefe`))&&(contatosDoSetor.push(equipe[j]),equipe.splice(j,1));document.getElementById(setoresID[i]).classList.add(`servidores-${contatosDoSetor.length}`),contatosDoSetor.length<2&&(document.getElementById(setoresID[i]).lastElementChild.firstElementChild.style.justifyContent="center",document.getElementById(setoresID[i]).lastElementChild.firstElementChild.style.width="100%");for(let l=contatosDoSetor.length-1;l>=0;l--)if(!contatosDoSetor[l].grupos.includes("ccs-coord")&&!contatosDoSetor[l].grupos.includes("ccse-assessoria")&&contatosDoSetor[l].grupos.includes(setoresID[i]+"-chefe")){inserirContato(i,l),contatosDoSetor.splice(l,1);break}for(let k=0;k<contatosDoSetor.length;k++)inserirContato(i,k)}},exibirSetor=function(e){e.target.parentElement.classList.toggle("up"),variaveisGlobais.trocarSeta(e.target.lastElementChild)},controlarExibicaoDiv=function(acao,classe,manipularClasses){var divs=document.querySelectorAll("."+classe);if("expandir"===acao)for(let i=0;i<divs.length;i++)divs[i].classList.remove(manipularClasses),divs[i].firstElementChild.lastElementChild.classList.add("fa-caret-up"),divs[i].firstElementChild.lastElementChild.classList.remove("fa-caret-down");else if("recolher"===acao)for(let i=0;i<divs.length;i++)divs[i].classList.add(manipularClasses),divs[i].firstElementChild.lastElementChild.classList.remove("fa-caret-up"),divs[i].firstElementChild.lastElementChild.classList.add("fa-caret-down")},gerarContato=function(equipe,l){var contatoDOM='<div class="contato">';equipe[l].foto?contatoDOM+=`<img src="/img/usuarios/${equipe[l].foto}">`:contatoDOM+='<img src="/img/usuarios/avatar.svg">';let cargo;for(let i=0;i<equipe[l].cargos.length;i++)if(link===equipe[l].cargos[i].contexto){cargo=equipe[l].cargos[i].cargo;break}return contatoDOM+=`<p class="cargo"><strong>${cargo}</strong></p>\n                <p><strong>${equipe[l].nome}</strong></p>\n                <p><a href="mailto:${equipe[l].email}">${equipe[l].email}</a></p>`,equipe[l].telefone&&0!==equipe[l].telefone&&(contatoDOM+=`<p>${equipe[l].telefone}</p>`),contatoDOM+="</div>"},recuperarConteudo=async function(){await $.ajax({type:"GET",url:"/recuperarConteudo",data:dadosBusca,dataType:"json"}).done(function(msg){msg&&(conteudos=msg,variaveisGlobais.removePreLoaders(".conteudo"))}).fail(function(msg){console.log("Fail! "+msg.data)})},exibirConteudo=function(conteudo){document.querySelector(".conteudo").insertAdjacentHTML("afterbegin",`<div class="conteudo-titulo ${conteudo._id}"><h1>${conteudo.titulo}</h1></div>`);var corpo='<div class="conteudo-corpo">';if(conteudo.dataAmigavel&&(corpo+=`<div class="conteudo-spans"><span class="span-${conteudo.natureza}">${conteudo.natureza}</span>|<span>${conteudo.dataAmigavel}</span></div>`),"foto"===conteudo.natureza||!0===conteudo.imagem){var legenda;legenda=conteudo.legenda?conteudo.legenda:"",corpo+=`\n        <div class="img-news-container">\n            ${"foto"!==conteudo.natureza?`<div class='foto-container'><img src="/img/conteudos/${conteudo._id}.jpg" class="header borda-${conteudo.natureza}" alt="${conteudo.titulo}"></div>`:`<img src="https://www.instagram.com/p/${conteudo.midia}/media/?size=l" class="header borda-${conteudo.natureza}" alt='${conteudo.titulo}'>`}\n            <div class="legenda-principal">${legenda}</div>\n        </div>`}if("video"===conteudo.natureza&&(corpo+=`<div class="youtube-player" data-id="${conteudo.midia}"></div>`),conteudo.autor&&"undefined"!==conteudo.autor&&(corpo+=`<span class="autor">Por: ${conteudo.autor}</span>`),corpo+=`<div class="texto-container ${conteudo.natureza}">${conteudo.texto}</div>`,0!==equipe.length){corpo+='<h2>Equipe:</h2><div id="div-equipe">';for(let l=equipe.length-1;l>=0;l--)if(equipe[l].grupos.includes(conteudo._id+"-coord")){corpo+=gerarContato(equipe,l),equipe.splice(l,1);break}for(let l=equipe.length-1;l>=0;l--)if(equipe[l].grupos.includes(conteudo._id+"-coordSub")){corpo+=gerarContato(equipe,l),equipe.splice(l,1);break}for(let l=equipe.length-1;l>=0;l--)if(equipe[l].grupos.includes(conteudo._id+"-chefe")){corpo+=gerarContato(equipe,l),equipe.splice(l,1);break}for(let l=equipe.length-1;l>=0;l--)if(equipe[l].grupos.includes(conteudo._id+"-chefeSub")){corpo+=gerarContato(equipe,l),equipe.splice(l,1);break}for(let l=equipe.length-1;l>=0;l--)equipe[l].grupos.includes("servidorDecania")&&(corpo+=gerarContato(equipe,l),equipe.splice(l,1));for(let l=equipe.length-1;l>=0;l--)equipe[l].grupos.includes("externo")&&(corpo+=gerarContato(equipe,l),equipe.splice(l,1));for(let l=equipe.length-1;l>=0;l--)corpo+=gerarContato(equipe,l)}corpo+=`<div class="fb-like fb_share" data-href="http://www.ccs.ufrj.br/conteudos/${link}" data-width="550" data-layout="button" data-action="like" data-size="small" data-show-faces="false" data-title="teste" data-desc="" data-share="true"></div>\n            <div class="button-div">\n                <button class="voltar">voltar</button>\n            </div>\n        </div>`,document.querySelector(".conteudo").insertAdjacentHTML("beforeend",corpo),!legenda&&document.querySelector(".legenda-principal")&&(document.querySelector(".legenda-principal").outerHTML="")};let eliminarDivArquivos=()=>{variaveisGlobais.exibirMensagem("<h3>Arquivos do conteúdo anterior apagados</h3>",3e3,"Atenção!"),document.querySelector(".arquivos-container").innerHTML="",id=0},manipularFormularioNoticias=e=>{"radio0"===e.target.previousElementSibling.id&&(variaveisGlobais.controlarVisibilidade("exibir","#form-imagem"),document.getElementById("imagem").checked&&variaveisGlobais.controlarVisibilidade("exibir","#legenda-imagem")),"radio1"!==e.target.previousElementSibling.id&&"radio2"!==e.target.previousElementSibling.id&&"radio3"!==e.target.previousElementSibling.id?(variaveisGlobais.controlarVisibilidade("ocultar","#autor-conteudo",400),"radio0"!==e.target.previousElementSibling.id&&(variaveisGlobais.controlarVisibilidade("ocultar","#legenda-imagem"),variaveisGlobais.controlarVisibilidade("ocultar","#form-imagem"))):(variaveisGlobais.controlarVisibilidade("exibir","#form-imagem"),document.getElementById("imagem").checked&&variaveisGlobais.controlarVisibilidade("exibir","#legenda-imagem"),variaveisGlobais.controlarVisibilidade("exibir","#autor-conteudo"))},manipularFormularioFotoVideo=e=>{let btnInserirArquivos=document.querySelector(".btn-inserir-arquivos"),midia=document.querySelector(".id-midia");"radio4"===e.target.previousElementSibling.id||"radio5"===e.target.previousElementSibling.id?(midia.innerHTML='\n        <p>ID da mídia</p>\n        <i class="fa fa-info"></i>\n        <span class="dica">Inserir o ID do vídeo ou foto, obtido na URL do youtube ou instagram. Ex.: \'SxIui3hIT-4\'</span>\n        <div class="midia">\n            <input type="text" name="midia" id="midia" required>\n        </div>\n        <p>Classificação do vídeo (apenas para videos)</p>        \n        <div>\n            <input type="radio" name="subtipo" id="arte" value="arte e cultura" required>\n            <label for="arte"><span></span>Arte e Cultura</label>\n\n        </div>\n        <div>\n            <input type="radio" name="subtipo" id="academico" value="acadêmico">\n            <label for="academico"><span></span>acadêmico</label>\n\n        </div>\n        <div>\n            <input type="radio" name="subtipo" id="institucional" value="institucional">\n            <label for="institucional"><span></span>institucional</label>\n\n        </div>\n    ',btnInserirArquivos.classList.add("hidden"),btnInserirArquivos.previousElementSibling.classList.add("hidden")):(midia.innerHTML="",btnInserirArquivos.classList.remove("hidden"),btnInserirArquivos.previousElementSibling.classList.remove("hidden"))},manipularFormularioDepoimento=e=>{"radio6"===e.target.previousElementSibling.id?(document.getElementById("personagem").required=!0,document.getElementById("atuacao").required=!0,document.querySelector(".form-titulo input").value="Personagem em foco",document.querySelector(".form-titulo input").classList.add("ineditavel"),document.querySelector(".form-nome input").classList.add("ineditavel"),variaveisGlobais.controlarVisibilidade("exibir",".form-personagem-nome"),variaveisGlobais.controlarVisibilidade("exibir",".form-personagem-atuacao"),variaveisGlobais.controlarVisibilidade("ocultar",".btn-inserir-arquivos"),inserirArquivos(),document.querySelector(".fechar-janela").classList.add("hidden"),document.querySelector("option[value='ata']").disabled=!0,document.querySelector("option[value='diversos']").disabled=!0,document.getElementById("nome").required=!1):(document.getElementById("personagem").required=!1,document.getElementById("atuacao").required=!1,document.getElementById("nome").value="",document.getElementById("titulo").value="",document.getElementById("personagem").value="",document.getElementById("atuacao").value="",document.querySelector(".form-nome input").classList.remove("ineditavel"),document.querySelector(".form-titulo input").classList.remove("ineditavel"),variaveisGlobais.controlarVisibilidade("ocultar",".form-personagem-nome",400),variaveisGlobais.controlarVisibilidade("ocultar",".form-personagem-atuacao",400),document.getElementById("nome").required=!0,"radio4"!==e.target.previousElementSibling.id&&"radio5"!==e.target.previousElementSibling.id&&variaveisGlobais.controlarVisibilidade("exibir",".btn-inserir-arquivos"))},manipularFormularioConteudos=e=>{document.querySelector(".form-natureza").classList.remove("sem-selecao"),variaveisGlobais.controlarVisibilidade("exibir",".conteudos-container-dados"),manipularFormularioNoticias(e),manipularFormularioFotoVideo(e),manipularFormularioDepoimento(e)},tratarNomeImagensCorpoTexto=()=>{let imagens=document.querySelectorAll("input[name='nomeImagem']");for(let i=0;i<imagens.length;i++)-1!==imagens[i].value.search("{")&&(imagens[i].value=imagens[i].value.replace(/{/g,"")),-1!==imagens[i].value.search("}")&&(imagens[i].value=imagens[i].value.replace(/}/g,""))};var exibirConteudos=function(conteudos){document.getElementById("resultados-busca-conteudo-container").innerHTML="",document.getElementById("resultados-busca-conteudo-container").insertAdjacentHTML("beforeend",`<p>Foram encontrados ${conteudos.length} conteúdos</p>`);for(let i=0;i<conteudos.length;i++){if(conteudos[i].imagem)var img=`<img src="/img/conteudos/${conteudos[i]._id}XSm.jpg" alt="${conteudos[i].titulo}">`;else img="";if(conteudos[i].dataAmigavel)dataAmigavel=conteudos[i].dataAmigavel;else var dataAmigavel="";var conteudo=`\n            <div class="conteudo borda-${conteudos[i].natureza}" id="${conteudos[i]._id}">\n                <div class="resultado-header">\n                    <h2>${conteudos[i].titulo}</h2>\n                    <span>${dataAmigavel}</span>\n                </div>\n                <div class="natureza">\n                    <span>${conteudos[i].natureza}</span>\n                </div>\n                <div class="img-news-container">\n                    ${img}\n                </div>\n                <p>${conteudos[i].resumo}</p>\n                <div class="editar">\n                    <a href="/conteudos/editar/${conteudos[i]._id}"><button>editar</button></a>\n                    <button id="btn.excluir.${conteudos[i]._id}" class="btn-excluir-conteudo">excluir</button>\n                    <form action="/conteudos/excluir/${conteudos[i]._id}" method="post" id="form-${conteudos[i]._id}" class="formulario janela hidden opacidade-zero" accept-charset="utf-8">\n                    <h3 class="header">Confirmação de exclusão</h3>\n                    <h2>Tem certeza que deseja excluir este conteúdo? Esta ação não poderá ser desfeita</h2>\n                    <div>\n                        <input type="text" class="hidden" name="id" value="${conteudos[i]._id}">\n                        <button class="requisicoes retornar">retornar</button>\n                        <input type="submit" class="requisicoes recusar" value="excluir conteudo">\n                    </div>\n\n                    </form>\n                </div>\n            </div>`;document.getElementById("resultados-busca-conteudo-container").insertAdjacentHTML("beforeend",conteudo)}document.getElementById("resultados-busca-conteudo-container").insertAdjacentHTML("beforeend",'<div class="arquivo"></div>')};document.getElementById("localizar-conteudo")&&(document.getElementById("btn-submit").addEventListener("click",async function(e){e.preventDefault();var naturezas=document.querySelectorAll("#natureza input"),termos=document.getElementById("query").value,destaque=document.getElementById("destaque").checked,filtros=[];for(let i=0;i<naturezas.length;i++)naturezas[i].checked&&filtros.push({natureza:naturezas[i].id});dadosBusca=""===termos&&0===filtros.length?{destaque}:""===termos?{filtros,destaque}:{termos:{$text:{$search:termos}},filtros,destaque},await recuperarConteudo(),exibirConteudos(conteudos)}),document.getElementById("resultados-busca-conteudo-container").addEventListener("click",function(e){if(e.target.classList.contains("btn-excluir-conteudo")){var id=`form-${e.target.id.split(".")[e.target.id.split(".").length-1]}`;variaveisGlobais.controlarVisibilidade("exibir",`#${id}`),variaveisGlobais.controlarVisibilidade("exibir","#localizar-conteudos-overlay")}e.target.classList.contains("retornar")&&(e.preventDefault(),variaveisGlobais.controlarVisibilidade("ocultar",`#form-${e.target.parentElement.parentElement.parentElement.parentElement.id}`),variaveisGlobais.controlarVisibilidade("ocultar","#localizar-conteudos-overlay"))})),document.querySelector(".editar-conteudo")&&document.addEventListener("DOMContentLoaded",async function(){var input=document.querySelectorAll(".form-natureza input"),subtipo=document.querySelectorAll("input[name='subtipo']"),nome=document.getElementById("nome"),data=document.getElementById("data"),btnInserirArquivos=document.querySelector(".btn-inserir-arquivos");dadosBusca={_id:link},await recuperarConteudo();for(let i=0;i<input.length;i++)input[i].defaultValue===conteudos.natureza&&(input[i].checked=!0);if(nome.value=conteudos._id,nome.classList.add("ineditavel"),data.classList.add("ineditavel"),document.getElementById("titulo").value=conteudos.titulo,document.getElementById("autor").value=conteudos.autor,document.getElementById("data").value=moment(conteudos.data).format("YYYY-MM-DD"),"video"===conteudos.natureza||"foto"===conteudos.natureza){document.getElementById("form-imagem").classList.add("hidden"),document.querySelector(".id-midia").classList.remove("hidden"),document.querySelector(".id-midia input").value=conteudos.midia,btnInserirArquivos.classList.add("hidden"),btnInserirArquivos.previousElementSibling.classList.add("hidden");for(let i=0;i<subtipo.length;i++)subtipo[i].value===conteudos.subtipo&&(subtipo[i].checked=!0)}"depoimento"===conteudos.natureza?(document.getElementById("personagem").value=conteudos.personagem,document.getElementById("atuacao").value=conteudos.atuacao):(variaveisGlobais.controlarVisibilidade("ocultar",".form-personagem-nome"),variaveisGlobais.controlarVisibilidade("ocultar",".form-personagem-atuacao")),0!==conteudos.tag.length?document.getElementById("tags").value=conteudos.tag:document.getElementById("tags").value="",!0===conteudos.imagem&&(document.getElementById("imagem").checked=!0,variaveisGlobais.controlarVisibilidade("exibir","#legenda-imagem"),document.getElementById("legenda").value=conteudos.legenda),"noticia"!==conteudos.natureza&&"informe"!==conteudos.natureza&&"evento"!==conteudos.natureza||(variaveisGlobais.controlarVisibilidade("exibir","#autor-conteudo"),document.getElementById("autor").innerHTML=conteudos.autor),conteudos.texto&&setTimeout(function(){tinymce.activeEditor.execCommand("mceInsertContent",!1,conteudos.texto)},1500)}),window.addEventListener("DOMContentLoaded",async function(){if(document.querySelector(".form-natureza")){document.querySelector(".form-natureza").addEventListener("click",function(e){e.preventDefault();let naturezaSelecionada,temArquivos=document.querySelector(".arquivos-container").innerHTML,naturezaOpcoes=document.querySelectorAll("input[name='natureza']");for(i=0;i<naturezaOpcoes.length;i++)naturezaOpcoes[i].checked&&(naturezaSelecionada=naturezaOpcoes[i]);"LABEL"===e.target.tagName&&(temArquivos&&void 0!==naturezaSelecionada&&e.target.previousElementSibling!==naturezaSelecionada?((e,previo)=>{variaveisGlobais.exibirMensagem("<div>\n                <h3>Os arquivos associados à antiga natureza serão apagados. Continuar?</h3>\n                <div style=\"margin-bottom: 20px;\" class=\"apagar-arquivos-button-div\">\n                    <button class='sim'>sim</button>\n                    <button class='nao'>não</button>\n                </div>\n            </div>",null,"Atenção"),document.querySelector(".apagar-arquivos-button-div").addEventListener("click",evt=>{evt.target.classList.contains("sim")?(e.target.previousElementSibling.checked=!0,eliminarDivArquivos()):evt.target.classList.contains("nao")&&variaveisGlobais.controlarVisibilidade("ocultar","#mensagens-genericas",400)})})(e):temArquivos&&void 0!==naturezaSelecionada||(e.target.previousElementSibling.checked=!0),manipularFormularioConteudos(e))},!0),document.querySelector(".form-personagem-nome input").addEventListener("blur",e=>{let nome=document.querySelector(".form-personagem-nome input").value;document.querySelector(".form-nome input").value=nome,document.getElementById("tipo-imagem-0").value=definirNomeImagem(null,0)}),document.getElementById("btn-submit").addEventListener("click",e=>{e.preventDefault();let erroPreenchimento=variaveisGlobais.checarInputs(document.querySelectorAll("input[required], select[required], textarea[required]"));tratarNomeImagensCorpoTexto(),erroPreenchimento||document.querySelector(".formulario").submit()}),document.querySelector("form#inserir-conteudo")||(document.querySelector(".form-natureza").classList.add("hidden"),variaveisGlobais.controlarVisibilidade("exibir",".conteudos-container-dados"))}if(document.querySelector(".equipe-corpo")){var equipe=await recuperarEquipe();montarEquipe(equipe),document.getElementById("div-equipe").addEventListener("click",function(e){e.target.classList.contains("setores-header")&&exibirSetor(e)},!0),document.querySelector(".equipe-header").addEventListener("click",function(e){e.target.classList.contains("recolher-todos")?controlarExibicaoDiv("recolher","setores","up"):e.target.classList.contains("expandir-todos")&&controlarExibicaoDiv("expandir","setores","up")})}document.querySelector(".equipe-corpo")||document.querySelector(".localizar-conteudos")||!document.querySelector(".conteudo")||(await recuperarConteudo(),await recuperarEquipe(),exibirConteudo(conteudos),"depoimento"!==conteudos.natureza&&conteudos.temDocumento&&rotinasDocumentos()),document.getElementById("controls")&&document.getElementById("controls").addEventListener("click",function(e){if(e.target.classList.contains("idioma")){for(i=0;i<document.querySelectorAll(".texto").length;i++)if(!document.querySelectorAll(".texto")[i].classList.contains("hidden")&&e.target.id.substr(0,2)!==document.querySelectorAll(".texto")[i].id){variaveisGlobais.controlarVisibilidade("ocultar",`#${document.querySelectorAll(".texto")[i].id}`),document.querySelectorAll(".idioma")[i].classList.remove("selecionado");break}document.getElementById(e.target.id.substr(0,2)).classList.contains("hidden")&&(variaveisGlobais.controlarVisibilidade("exibir",`#${e.target.id.substr(0,2)}`),e.target.classList.add("selecionado")),"portugues"!==e.target.id?document.querySelector(".conteudo-titulo > h1").classList.add("opacidade-zero"):document.querySelector(".conteudo-titulo > h1").classList.remove("opacidade-zero")}}),document.querySelector(".voltar")&&document.querySelector(".voltar").addEventListener("click",function(e){window.history.back(),setTimeout(function(){$("html, body").animate({scrollTop:$("#barra-brasil").offset().top},"slow",function(){})},600)}),document.querySelector("#form-imagem input")&&document.querySelector("#form-imagem input").addEventListener("change",function(e){e.target.checked?variaveisGlobais.controlarVisibilidade("exibir","#legenda-imagem"):variaveisGlobais.controlarVisibilidade("ocultar","#legenda-imagem",400)}),conteudos&&"organograma"===conteudos._id&&(document.querySelector(".conteudo-corpo").classList.add("grande"),document.querySelector(".texto-container").classList.add("grande")),document.querySelector(".composicao-container")&&(document.querySelector(".composicao-container .icon").innerHTML="<i class='fa fa-caret-down'></i>",document.querySelector(".efetivos .icon").innerHTML="<i class='fa fa-caret-down'></i>",document.querySelector(".convidados .icon").innerHTML="<i class='fa fa-caret-down'></i>",document.querySelector(".composicao-container").addEventListener("click",e=>{!e.target.parentElement.classList.contains("composicao-container")&&!e.target.parentElement.classList.contains("composicao-menu")||"H2"!==e.target.tagName&&!e.target.classList.contains("titulo")||(e.target.parentElement.classList.toggle("aberto"),variaveisGlobais.trocarSeta(e.target.previousElementSibling.firstElementChild))}));var div,n,v=document.getElementsByClassName("youtube-player");for(n=0;n<v.length;n++)(div=document.createElement("div")).setAttribute("data-id",v[n].dataset.id),div.innerHTML=variaveisGlobais.labnolThumb(v[n].dataset.id),div.onclick=variaveisGlobais.labnolIframe,v[n].appendChild(div);!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];d.getElementById(id)||((js=d.createElement(s)).id=id,js.src="//connect.facebook.net/pt_BR/sdk.js#xfbml=1&version=v2.10",fjs.parentNode.insertBefore(js,fjs))}(document,"script","facebook-jssdk")});